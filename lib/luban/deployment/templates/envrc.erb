# Project environment activation resource file for <%= stage %>.<%= project %>/<%= application %>
# Revision: <%= revision %>
# Created at <%= Time.now().strftime("%d/%m/%Y %H:%M:%S") %>

echo_line() {
  if [ "$PS1" ]; then
    printf "$1\n"
  fi
}

if [ -n "${LUBAN_ROOT:+x}" ]; then
  if [[ "$LUBAN_ROOT" == "<%= app_path %>" ]]; then
    echo_line "Project environment for <%= project %> has ALREADY been activated!"
  else
    local current_env=${LUBAN_ROOT##*env/}
    echo_line "Project environment $current_env is STILL active!"
    echo_line "Please de-activate it first:"
    echo_line "\tunset_lubenv $current_env"
    echo_line "\t\tor"
    echo_line "\tsource $LUBAN_ROOT/.unset_envrc"
  fi
else
  LUBAN_ROOT="<%= app_path %>"
  PATH="$LUBAN_ROOT/bin:$PATH"
  export LUBAN_ROOT
  export PATH

  echo_line "Project environment <%= stage %>.<%= project %>/<%= application %> is activated!"
fi

